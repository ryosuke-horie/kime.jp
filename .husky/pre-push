#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🧪 プッシュ前の検証を実行中..."

# 型チェック実行
echo "🔍 TypeScriptの型チェックを実行中..."
pnpm typecheck || { 
  echo "❌ 型チェックに失敗しました。修正してから再度プッシュしてください。"; 
  exit 1; 
}

# テスト実行
echo "🧪 テストを実行中..."
pnpm test || { 
  echo "❌ テストに失敗しました。修正してから再度プッシュしてください。"; 
  exit 1; 
}

echo "✅ 全ての検証が完了しました！"