# lefthook.yml

# pre-commitフック設定
pre-commit:
  parallel: true
  commands:
    biome-check:
      glob: "*.{js,jsx,ts,tsx,json,yaml,yml,md}"
      run: |
        echo "📝 コミット前の検証を実行中..."
        echo "🔍 Biomeによるコードチェックを実行中..."
        pnpm biome check --write {staged_files}
    biome-lint:
      glob: "*.{js,jsx,ts,tsx}"
      run: |
        echo "🔍 Biomeによるリントを実行中..."
        pnpm biome lint --apply {staged_files}

# pre-pushフック設定
pre-push:
  parallel: false
  commands:
    typecheck:
      run: |
        echo "🧪 プッシュ前の検証を実行中..."
        echo "🔍 TypeScriptの型チェックを実行中..."
        pnpm typecheck
    test:
      run: |
        echo "🧪 テストを実行中..."
        pnpm test
    success:
      run: echo "✅ 全ての検証が完了しました！"

# Git Hooks をインストールするためのスクリプト
# package.json の prepare スクリプトに "lefthook install" を追加することでも可能