# lefthook.yml

# pre-commitãƒ•ãƒƒã‚¯è¨­å®š
pre-commit:
  parallel: true
  commands:
    biome-check:
      skip_empty: true
      run: |
        STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(js|jsx|ts|tsx)$' || true)
        if [ -n "$STAGED_FILES" ]; then
          echo "ğŸ“ ã‚³ãƒŸãƒƒãƒˆå‰ã®æ¤œè¨¼ã‚’å®Ÿè¡Œä¸­..."
          echo "ğŸ” Biomeã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
          echo "$STAGED_FILES" | xargs pnpm biome check --write
        else
          echo "ğŸ” ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚"
        fi
        exit 0
    biome-lint:
      skip_empty: true
      run: |
        STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(js|jsx|ts|tsx)$' || true)
        if [ -n "$STAGED_FILES" ]; then
          echo "ğŸ” Biomeã«ã‚ˆã‚‹ãƒªãƒ³ãƒˆã‚’å®Ÿè¡Œä¸­..."
          echo "$STAGED_FILES" | xargs pnpm biome lint --write
        else
          echo "ğŸ” ãƒªãƒ³ãƒˆå¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚"
        fi
        exit 0

# pre-pushãƒ•ãƒƒã‚¯è¨­å®š
pre-push:
  parallel: false
  commands:
    typecheck:
      run: |
        echo "ğŸ§ª ãƒ—ãƒƒã‚·ãƒ¥å‰ã®æ¤œè¨¼ã‚’å®Ÿè¡Œä¸­..."
        echo "ğŸ” TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
        pnpm typecheck
    lint:
      run: |
        echo "ğŸ” ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
        pnpm lint
    build:
      run: |
        echo "ğŸ”¨ ãƒ“ãƒ«ãƒ‰æ¤œè¨¼ã‚’å®Ÿè¡Œä¸­..."
        pnpm build
    test:
      run: |
        echo "ğŸ§ª ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
        pnpm test